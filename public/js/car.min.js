document.querySelector("#modal")&&document.querySelector("#modal").show();const tabs=document.querySelectorAll(".tabs"),blocks=document.querySelectorAll("[block]"),price=+document.querySelector("#price").textContent,days=document.querySelector("#days"),total=document.querySelector("#total"),smtotal=document.querySelector("#sm-total"),smdays=document.querySelector("#sm-days"),booking=document.querySelector("#book"),reservation=document.querySelector("#reservation"),smreserve=document.querySelector("#sm-reserve"),feedback_trigger=document.querySelector("#feedback_trigger"),feedback_overlay=document.querySelector("#feedback_overlay"),feedback_form=document.querySelector("#feedback_form");function activeTab(e){tabs.forEach(t=>{t.classList[e===t?"add":"remove"]("active")})}function betweenDates(e,t){let r=new Date(e),o=new Date(t);return(o-r)/864e5}function ucWords(e){let t=e.replace(/-/g," ").replace("pick up","Pick-up").replace("drop off","Drop-off"),r=t.split(" "),o=r.map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ");return o}function calcPrice(){let e=booking.elements;if(!e.from_date.value.trim()||!e.to_date.value.trim())return;let t=Math.round(betweenDates(e.from_date.value+" "+e.from_time.value,e.to_date.value+" "+e.to_time.value));days.innerHTML=t,total.innerHTML=(t*price).toFixed(2),smtotal.innerHTML=(t*price).toFixed(2),smdays.innerHTML=Neo.Helper.trans("Per")+" "+t+" "+Neo.Helper.trans("Days")}function intersect(){let e=window.scrollY||document.documentElement.scrollTop,t=null,r=1/0;blocks.forEach(o=>{let l=o.getBoundingClientRect(),a=l.top+window.pageYOffset-40,i=Math.abs(e-a);i<r&&(r=i,t=o)}),t&&activeTab(document.querySelector(`[href="#${t.id}"]`))}function reserve(e){e.preventDefault();let t=[],r=booking.elements;for(let o=0;o<r.length;o++){let l=r[o];if("value"in l){let a=document.querySelector(l.dataset.error);l.value.trim()?(l.classList.remove("outline","outline-2","outline-red-400","outline-offset-[-2px]"),a&&a.classList.add("hidden")):(l.classList.add("outline","outline-2","outline-red-400","outline-offset-[-2px]"),a&&(a.innerHTML=Neo.Helper.trans(ucWords(l.name)+" Is Required")),a&&a.classList.remove("hidden")),t.push(!l.value.trim())}}if(r.from_date.value.trim()){let i=document.querySelector(r.from_date.dataset.error);0>betweenDates(Neo.Helper.Str.moment(new Date().toDateString()),r.from_date.value)?(r.from_date.classList.add("outline","outline-2","outline-red-400","outline-offset-[-2px]"),i&&(i.innerHTML=Neo.Helper.trans("Pick-up Date Must Be Today Or After")),i&&i.classList.remove("hidden")):(r.from_date.classList.remove("outline","outline-2","outline-red-400","outline-offset-[-2px]"),i&&i.classList.add("hidden")),t.push(!r.from_date.value.trim())}if(r.from_date.value.trim()&&r.to_date.value.trim()){let s=document.querySelector(r.from_date.dataset.error);1>betweenDates(r.from_date.value,r.to_date.value)?(r.to_date.classList.add("outline","outline-2","outline-red-400","outline-offset-[-2px]"),s&&(s.innerHTML=Neo.Helper.trans("Drop-off Date Must Be After Pick-up Date")),s&&s.classList.remove("hidden")):(r.to_date.classList.remove("outline","outline-2","outline-red-400","outline-offset-[-2px]"),s&&s.classList.add("hidden")),t.push(!r.to_date.value.trim())}t.includes(!0)||booking.submit()}function feedback(e){e.preventDefault();let t=[],r=feedback_form.elements;for(let o=0;o<r.length;o++){let l=r[o];if("radio"!==l.type&&"value"in l){let a=document.querySelector(l.dataset.error);l.value.trim()?(l.classList.remove("outline","outline-2","outline-red-400","outline-offset-[-2px]"),a&&a.classList.add("hidden")):(l.classList.add("outline","outline-2","outline-red-400","outline-offset-[-2px]"),a&&(a.innerHTML=Neo.Helper.trans(ucWords(l.name)+" Is Required")),a&&a.classList.remove("hidden")),t.push(!l.value.trim())}}let i=document.querySelector(r.rate[0].dataset.error);[...r.rate].map(e=>e.checked).find(e=>e)?(document.querySelector("#rate-group").classList.remove("outline","outline-2","outline-red-400","outline-offset-[-2px]","p-1"),i&&i.classList.add("hidden")):(document.querySelector("#rate-group").classList.add("outline","outline-2","outline-red-400","outline-offset-[-2px]","p-1"),i&&(i.innerHTML=Neo.Helper.trans(ucWords("Rate Is Required"))),i&&i.classList.remove("hidden")),t.push(![...r.rate].map(e=>e.checked).find(e=>e)),t.includes(!0)||feedback_form.submit()}document.querySelector("#ui-carousel")&&Slider({root:document.querySelector("#ui-carousel"),prev:document.querySelector("#ui-prev"),next:document.querySelector("#ui-next"),opts:{drag:!0,gaps:0}}),tabs.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),activeTab(e);let r=e.getAttribute("href").substring(1),o=document.getElementById(r),l=o.offsetTop-60;window.scrollTo({top:l,behavior:"smooth"})})}),new IntersectionObserver(e=>{e.forEach(e=>{smreserve.classList[e.isIntersecting?"add":"remove"]("translate-y-full")})}).observe(reservation),feedback_trigger.addEventListener("click",e=>{feedback_overlay.show()}),booking.addEventListener("change",calcPrice),booking.addEventListener("input",calcPrice),window.addEventListener("scroll",intersect),booking.addEventListener("submit",reserve),feedback_form.addEventListener("submit",feedback),calcPrice();